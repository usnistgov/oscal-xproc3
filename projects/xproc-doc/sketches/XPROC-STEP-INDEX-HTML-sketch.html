<!DOCTYPE html>
<html>
   <head>
      <meta http-equiv="Content-Type" content="application/xml; charset=UTF-8">
      <style type="text/css" xml:space="preserve">
         body { font-family: sans-serif }
div { border: medium outset grey; padding: 0.37em; margin-top: 0.4em }
div.subpipeline { border: medium inset steelblue; background: lightsteelblue }
div *.compound { background-color: whitesmoke; font-size: 95% }
*.atomic { background-color: gainsboro } 
p { margin: 0em }
.v { font-family: monospace; font-size: 90% }
div.input, div.output { display: inline-block; max-width: fit-content; vertical-align: text-top }
.label { white-space: nowrap; overflow: visible }
      </style>
   </head>
   <body>
      <div class="compound"
           data-version="3.0"
           data-type="ox:XPROC-STEP-INDEX-HTML"
           data-name="XPROC-STEP-INDEX-HTML"
           style="width: min-content">
         <p class="label">declare-step</p>
         <p class="label">
            <b>version</b>: <span class="v">3.0</span>
         </p>
         <p class="label">
            <b>type</b>: <span class="v">ox:XPROC-STEP-INDEX-HTML</span>
         </p>
         <p class="label">
            <b>name</b>: <span class="v">XPROC-STEP-INDEX-HTML</span>
         </p>
         <div class="input"
              data-port="spec-doc"
              data-primary="false">
            <p class="label">
               <b>port</b>: <span class="v">spec-doc</span>
            </p>
            <p class="label">
               <b>primary</b>: <span class="v">false</span>
            </p>
            <div class="document"
                 data-href="https://xproc.org/specifications.html">
               <p class="label">
                  <b>href</b>: <span class="v">https://xproc.org/specifications.html</span>
               </p>
            </div>
         </div>
         <div class="input"
              data-port="step-list"
              data-primary="true">
            <p class="label">
               <b>port</b>: <span class="v">step-list</span>
            </p>
            <p class="label">
               <b>primary</b>: <span class="v">true</span>
            </p>
            <div class="document"
                 data-href="xproc-steps.xml">
               <p class="label">
                  <b>href</b>: <span class="v">xproc-steps.xml</span>
               </p>
            </div>
         </div>
         <div class="subpipeline"
              data-PLACES="6"
              style="display: grid;grid-template-columns: repeat(7,auto); grid-template-rows: repeat(6,auto)">
            <div class="group compound"
                 data-PLACEMENT="1"
                 data-AMONG="6"
                 style="grid-area: 1 / 1 / 1 / 3"
                 data-name="compound-step-links">
               <p class="label">group</p>
               <p class="label">
                  <b>name</b>: <span class="v">compound-step-links</span>
               </p>
               <div class="output"
                    data-port="result">
                  <p class="label">
                     <b>port</b>: <span class="v">result</span>
                  </p>
               </div>
               <div class="subpipeline"
                    data-PLACES="7"
                    style="display: grid;grid-template-columns: repeat(8,auto); grid-template-rows: repeat(7,auto)">
                  <div class="for-each compound"
                       data-PLACEMENT="1"
                       data-AMONG="7"
                       style="grid-area: 1 / 1 / 1 / 3">
                     <p class="label">for-each</p>
                     <div class="with-input"
                          data-select="/descendant::db:para[@xml:id='p.subpipeline']/db:tag[not(.='p:variable')]"
                          data-href="https://spec.xproc.org/lastcall-2024-08/head/xproc/specification.xml">
                        <p class="label">
                           <b>select</b>: <span class="v">/descendant::db:para[@xml:id='p.subpipeline']/db:tag[not(.='p:variable')]</span>
                        </p>
                        <p class="label">
                           <b>href</b>: <span class="v">https://spec.xproc.org/lastcall-2024-08/head/xproc/specification.xml</span>
                        </p>
                     </div>
                     <div class="subpipeline"
                          data-PLACES="4"
                          style="display: grid;grid-template-columns: repeat(5,auto); grid-template-rows: repeat(4,auto)">
                        <div class="rename atomic"
                             data-PLACEMENT="1"
                             data-AMONG="4"
                             style="grid-area: 1 / 1 / 1 / 3"
                             data-match="db:tag"
                             data-new-name="a">
                           <p class="label">rename</p>
                           <p class="label">
                              <b>match</b>: <span class="v">db:tag</span>
                           </p>
                           <p class="label">
                              <b>new-name</b>: <span class="v">a</span>
                           </p>
                        </div>
                        <div class="add-attribute atomic"
                             data-PLACEMENT="2"
                             data-AMONG="4"
                             style="grid-area: 2 / 2 / 2 / 4"
                             data-attribute-name="href"
                             data-attribute-value="https://spec.xproc.org/lastcall-2024-08/head/xproc/#{string(.) =&gt; translate(':','.')}">
                           <p class="label">add-attribute</p>
                           <p class="label">
                              <b>attribute-name</b>: <span class="v">href</span>
                           </p>
                           <p class="label">
                              <b>attribute-value</b>: <span class="v">https://spec.xproc.org/lastcall-2024-08/head/xproc/#{string(.) =&gt; translate(':','.')}</span>
                           </p>
                        </div>
                        <div class="add-attribute atomic"
                             data-PLACEMENT="3"
                             data-AMONG="4"
                             style="grid-area: 3 / 3 / 3 / 5"
                             data-match="a"
                             data-attribute-name="target"
                             data-attribute-value="specs">
                           <p class="label">add-attribute</p>
                           <p class="label">
                              <b>match</b>: <span class="v">a</span>
                           </p>
                           <p class="label">
                              <b>attribute-name</b>: <span class="v">target</span>
                           </p>
                           <p class="label">
                              <b>attribute-value</b>: <span class="v">specs</span>
                           </p>
                        </div>
                        <div class="wrap atomic"
                             data-PLACEMENT="4"
                             data-AMONG="4"
                             style="grid-area: 4 / 4 / 4 / 5"
                             data-match="/*"
                             data-wrapper="li">
                           <p class="label">wrap</p>
                           <p class="label">
                              <b>match</b>: <span class="v">/*</span>
                           </p>
                           <p class="label">
                              <b>wrapper</b>: <span class="v">li</span>
                           </p>
                        </div>
                     </div>
                  </div>
                  <div class="wrap-sequence atomic"
                       data-PLACEMENT="2"
                       data-AMONG="7"
                       style="grid-area: 2 / 2 / 2 / 4"
                       data-wrapper="ul">
                     <p class="label">wrap-sequence</p>
                     <p class="label">
                        <b>wrapper</b>: <span class="v">ul</span>
                     </p>
                  </div>
                  <div class="wrap-sequence atomic"
                       data-PLACEMENT="3"
                       data-AMONG="7"
                       style="grid-area: 3 / 3 / 3 / 5"
                       data-wrapper="div">
                     <p class="label">wrap-sequence</p>
                     <p class="label">
                        <b>wrapper</b>: <span class="v">div</span>
                     </p>
                  </div>
                  <div class="insert atomic"
                       data-PLACEMENT="4"
                       data-AMONG="7"
                       style="grid-area: 4 / 4 / 4 / 6"
                       data-match="/*"
                       data-position="first-child">
                     <p class="label">insert</p>
                     <p class="label">
                        <b>match</b>: <span class="v">/*</span>
                     </p>
                     <p class="label">
                        <b>position</b>: <span class="v">first-child</span>
                     </p>
                     <div class="with-input"
                          data-port="insertion">
                        <p class="label">
                           <b>port</b>: <span class="v">insertion</span>
                        </p>
                        <div class="h2">
                        </div>
                     </div>
                  </div>
                  <div class="namespace-delete atomic"
                       data-PLACEMENT="5"
                       data-AMONG="7"
                       style="grid-area: 5 / 5 / 5 / 7"
                       data-prefixes="db xsl c ox xs">
                     <p class="label">namespace-delete</p>
                     <p class="label">
                        <b>prefixes</b>: <span class="v">db xsl c ox xs</span>
                     </p>
                  </div>
                  <div class="namespace-rename atomic"
                       data-PLACEMENT="6"
                       data-AMONG="7"
                       style="grid-area: 6 / 6 / 6 / 8"
                       data-to="http://www.w3.org/1999/xhtml">
                     <p class="label">namespace-rename</p>
                     <p class="label">
                        <b>to</b>: <span class="v">http://www.w3.org/1999/xhtml</span>
                     </p>
                  </div>
                  <div class="cast-content-type atomic"
                       data-PLACEMENT="7"
                       data-AMONG="7"
                       style="grid-area: 7 / 7 / 7 / 8"
                       data-content-type="application/xhtml+xml">
                     <p class="label">cast-content-type</p>
                     <p class="label">
                        <b>content-type</b>: <span class="v">application/xhtml+xml</span>
                     </p>
                  </div>
               </div>
            </div>
            <div class="add-attribute atomic"
                 data-PLACEMENT="2"
                 data-AMONG="6"
                 style="grid-area: 2 / 2 / 2 / 4"
                 data-name="links-rewritten"
                 data-match="a"
                 data-attribute-name="target"
                 data-attribute-value="specs">
               <p class="label">add-attribute</p>
               <p class="label">
                  <b>name</b>: <span class="v">links-rewritten</span>
               </p>
               <p class="label">
                  <b>match</b>: <span class="v">a</span>
               </p>
               <p class="label">
                  <b>attribute-name</b>: <span class="v">target</span>
               </p>
               <p class="label">
                  <b>attribute-value</b>: <span class="v">specs</span>
               </p>
               <div class="with-input"
                    data-pipe="spec-doc@XPROC-STEP-INDEX-HTML">
                  <p class="label">
                     <b>pipe</b>: <span class="v">spec-doc@XPROC-STEP-INDEX-HTML</span>
                  </p>
               </div>
            </div>
            <div class="xslt atomic"
                 data-PLACEMENT="3"
                 data-AMONG="6"
                 style="grid-area: 3 / 3 / 3 / 5"
                 data-message="[XPROC-STEP-INDEX-HTML] Producing HTML from XML step list xproc-steps.xml">
               <p class="label">xslt</p>
               <div class="with-input"
                    data-port="source"
                    data-pipe="step-list@XPROC-STEP-INDEX-HTML">
                  <p class="label">
                     <b>port</b>: <span class="v">source</span>
                  </p>
                  <p class="label">
                     <b>pipe</b>: <span class="v">step-list@XPROC-STEP-INDEX-HTML</span>
                  </p>
               </div>
               <div class="with-input"
                    data-port="stylesheet"
                    data-href="src/declarations-html.xsl">
                  <p class="label">
                     <b>port</b>: <span class="v">stylesheet</span>
                  </p>
                  <p class="label">
                     <b>href</b>: <span class="v">src/declarations-html.xsl</span>
                  </p>
               </div>
            </div>
            <div class="insert atomic"
                 data-PLACEMENT="4"
                 data-AMONG="6"
                 style="grid-area: 4 / 4 / 4 / 6"
                 data-match="div[@id='specification-links']"
                 data-position="last-child"
                 data-message="[XPROC-STEP-INDEX-HTML] Inserting reference links">
               <p class="label">insert</p>
               <p class="label">
                  <b>match</b>: <span class="v">div[@id='specification-links']</span>
               </p>
               <p class="label">
                  <b>position</b>: <span class="v">last-child</span>
               </p>
               <div class="with-input"
                    data-port="insertion"
                    data-select="/descendant::ul[5]"
                    data-pipe="@links-rewritten">
                  <p class="label">
                     <b>port</b>: <span class="v">insertion</span>
                  </p>
                  <p class="label">
                     <b>select</b>: <span class="v">/descendant::ul[5]</span>
                  </p>
                  <p class="label">
                     <b>pipe</b>: <span class="v">@links-rewritten</span>
                  </p>
               </div>
            </div>
            <div class="insert atomic"
                 data-PLACEMENT="5"
                 data-AMONG="6"
                 style="grid-area: 5 / 5 / 5 / 7"
                 data-match="section[@class='introduction']"
                 data-position="after"
                 data-message="[XPROC-STEP-INDEX-HTML] Inserting compound step links">
               <p class="label">insert</p>
               <p class="label">
                  <b>match</b>: <span class="v">section[@class='introduction']</span>
               </p>
               <p class="label">
                  <b>position</b>: <span class="v">after</span>
               </p>
               <div class="with-input"
                    data-port="insertion"
                    data-select="/*"
                    data-pipe="result@compound-step-links">
                  <p class="label">
                     <b>port</b>: <span class="v">insertion</span>
                  </p>
                  <p class="label">
                     <b>select</b>: <span class="v">/*</span>
                  </p>
                  <p class="label">
                     <b>pipe</b>: <span class="v">result@compound-step-links</span>
                  </p>
               </div>
            </div>
            <div class="store atomic"
                 data-PLACEMENT="6"
                 data-AMONG="6"
                 style="grid-area: 6 / 6 / 6 / 7"
                 data-href="out/xproc-step-list.html"
                 data-message="[XPROC-STEP-INDEX-HTML] Storing xproc-step-list.html">
               <p class="label">store</p>
               <p class="label">
                  <b>href</b>: <span class="v">out/xproc-step-list.html</span>
               </p>
            </div>
         </div>
      </div>
   </body>
</html>